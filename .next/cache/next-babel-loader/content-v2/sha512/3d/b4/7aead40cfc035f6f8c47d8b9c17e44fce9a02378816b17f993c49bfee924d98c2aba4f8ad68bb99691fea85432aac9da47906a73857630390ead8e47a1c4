{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\gusta\\\\Pessoal\\\\Mufasa\\\\mufasa_vercel\\\\pages\\\\profile\\\\home\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useEffect } from 'react';\nimport Link from 'next/link';\nimport { DataContext } from '../../../store/GlobalState';\nimport Cookie from 'js-cookie';\nimport { ACTION } from '../../../store/Actions';\nimport { useRouter } from 'next/router';\nimport { putData } from '../utils/fetchData';\n\nfunction Home() {\n  _s();\n\n  var _this = this;\n\n  var _useContext = useContext(DataContext),\n      state = _useContext[0],\n      dispatch = _useContext[1];\n\n  var auth = state.auth;\n\n  var handleUpdateProfile = function handleUpdateProfile(e) {\n    e.preventDefault();\n    if (CPF !== auth.user.name || CEIpassword) updateInfor();\n  };\n\n  var updateInfor = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              dispatch({\n                type: 'NOTIFY',\n                payload: {\n                  loading: true\n                }\n              });\n              putData('user', {\n                CPF: CPF,\n                CEIpassword: CEIpassword\n              }, auth.token).then(function (res) {\n                if (res.err) return dispatch({\n                  type: 'NOTIFY',\n                  payload: {\n                    error: res.err\n                  }\n                });\n                dispatch({\n                  type: 'AUTH',\n                  payload: {\n                    token: auth.token,\n                    user: res.user\n                  }\n                });\n                return dispatch({\n                  type: 'NOTIFY',\n                  payload: {\n                    success: res.msg\n                  }\n                });\n              });\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function updateInfor() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var handleLogout = function handleLogout() {\n    Cookie.remove('refreshToken', {\n      path: '/api/auth/accessToken'\n    });\n    localStorage.removeItem('firstLogin');\n    dispatch({\n      type: ACTION.AUTH,\n      payload: {}\n    });\n  };\n\n  var loggedRouter = function loggedRouter() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mx-auto my-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Bem vindo, \", auth.user.email]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 17\n      }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleLogout,\n        children: \"Logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 17\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }, _this);\n  };\n\n  var router = useRouter();\n  /*useEffect(() => {\r\n      if (Object.keys(auth).length === 0) {\r\n          router.push('/bend-admin/')\r\n      } else if (Object.keys(auth).length !== 0 && !auth.user.admin) {\r\n          router.push('/bend-admin/denied-access')\r\n      }\r\n    }, [auth])*/\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"d-flex flex-column\",\n    children: /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"mx-auto my-4\",\n      children: \"User HOME\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Home, \"EHNB1emd47b8EJ/41cB7CZs10sQ=\", false, function () {\n  return [useRouter];\n});\n\n_c = Home;\nexport default Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["C:/Users/gusta/Pessoal/Mufasa/mufasa_vercel/pages/profile/home/index.js"],"names":["React","useContext","useEffect","Link","DataContext","Cookie","ACTION","useRouter","putData","Home","state","dispatch","auth","handleUpdateProfile","e","preventDefault","CPF","user","name","CEIpassword","updateInfor","type","payload","loading","token","then","res","err","error","success","msg","handleLogout","remove","path","localStorage","removeItem","AUTH","loggedRouter","email","router"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect } from 'react';\r\nimport Link from 'next/link';\r\nimport { DataContext } from '../../../store/GlobalState';\r\nimport Cookie from 'js-cookie'\r\nimport { ACTION } from '../../../store/Actions';\r\nimport { useRouter } from 'next/router'\r\nimport { putData } from '../utils/fetchData'\r\n\r\nfunction Home() {\r\n\r\n    const [state, dispatch] = useContext(DataContext);\r\n    const { auth } = state\r\n\r\n    const handleUpdateProfile = e => {\r\n        e.preventDefault()\r\n\r\n        if(CPF !== auth.user.name || CEIpassword) updateInfor()\r\n    }\r\n    \r\n    const updateInfor = async () => {\r\n       \r\n        dispatch({type: 'NOTIFY', payload: {loading: true}})\r\n\r\n        \r\n\r\n        putData('user', {\r\n            CPF , CEIpassword\r\n        }, auth.token).then(res => {\r\n            if(res.err) return dispatch({type: 'NOTIFY', payload: {error: res.err}})\r\n\r\n            dispatch({type: 'AUTH', payload: {\r\n                token: auth.token,\r\n                user: res.user\r\n            }})\r\n            return dispatch({type: 'NOTIFY', payload: {success: res.msg}})\r\n        })\r\n    }\r\n\r\n\r\n    const handleLogout = () => {\r\n        Cookie.remove('refreshToken', { path: '/api/auth/accessToken' })\r\n        localStorage.removeItem('firstLogin')\r\n        dispatch({\r\n            type: ACTION.AUTH,\r\n            payload: {},\r\n        })\r\n    }\r\n\r\n    const loggedRouter = () => {\r\n        return (\r\n            <div className=\"mx-auto my-4\">\r\n                <p>Bem vindo, {auth.user.email}</p>\r\n                <button onClick={handleLogout}>Logout</button>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const router = useRouter()\r\n\r\n    /*useEffect(() => {\r\n        if (Object.keys(auth).length === 0) {\r\n            router.push('/bend-admin/')\r\n        } else if (Object.keys(auth).length !== 0 && !auth.user.admin) {\r\n            router.push('/bend-admin/denied-access')\r\n        }\r\n\r\n    }, [auth])*/\r\n\r\n    return (\r\n        <div className=\"d-flex flex-column\">\r\n            <p className=\"mx-auto my-4\">User HOME</p>\r\n            \r\n\r\n           {/*{\r\n                Object.keys(auth).length === 0 ?\r\n                    (\r\n                        ''\r\n                    ) : (\r\n                        loggedRouter()\r\n                    )\r\n            }*/}\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default Home"]},"metadata":{},"sourceType":"module"}