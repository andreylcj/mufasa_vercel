{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\gusta\\\\Pessoal\\\\Mufasa\\\\mufasa_vercel\\\\pages\\\\profile\\\\home\\\\index.js\";\nimport React, { useContext, useEffect } from 'react';\nimport Link from 'next/link';\nimport { DataContext } from '../../../store/GlobalState';\nimport Cookie from 'js-cookie';\nimport { ACTION } from '../../../store/Actions';\nimport { useRouter } from 'next/router';\nimport { putData } from '../utils/fetchData';\n\nfunction Home() {\n  const {\n    0: state,\n    1: dispatch\n  } = useContext(DataContext);\n  const {\n    auth\n  } = state;\n\n  const handleUpdateProfile = e => {\n    e.preventDefault();\n    if (CPF !== auth.user.name || CEIpassword) updateInfor();\n  };\n\n  const updateInfor = async () => {\n    dispatch({\n      type: 'NOTIFY',\n      payload: {\n        loading: true\n      }\n    });\n    putData('user', {\n      CPF,\n      CEIpassword\n    }, auth.token).then(res => {\n      if (res.err) return dispatch({\n        type: 'NOTIFY',\n        payload: {\n          error: res.err\n        }\n      });\n      dispatch({\n        type: 'AUTH',\n        payload: {\n          token: auth.token,\n          user: res.user\n        }\n      });\n      return dispatch({\n        type: 'NOTIFY',\n        payload: {\n          success: res.msg\n        }\n      });\n    });\n  };\n\n  const handleLogout = () => {\n    Cookie.remove('refreshToken', {\n      path: '/api/auth/accessToken'\n    });\n    localStorage.removeItem('firstLogin');\n    dispatch({\n      type: ACTION.AUTH,\n      payload: {}\n    });\n  };\n\n  const loggedRouter = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mx-auto my-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Bem vindo, \", auth.user.email]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleLogout,\n        children: \"Logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }, this);\n  };\n\n  const router = useRouter();\n  /*useEffect(() => {\r\n      if (Object.keys(auth).length === 0) {\r\n          router.push('/bend-admin/')\r\n      } else if (Object.keys(auth).length !== 0 && !auth.user.admin) {\r\n          router.push('/bend-admin/denied-access')\r\n      }\r\n    }, [auth])*/\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"d-flex flex-column\",\n    children: /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"mx-auto my-4\",\n      children: \"User HOME\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 9\n  }, this);\n}\n\nexport default Home;","map":{"version":3,"sources":["C:/Users/gusta/Pessoal/Mufasa/mufasa_vercel/pages/profile/home/index.js"],"names":["React","useContext","useEffect","Link","DataContext","Cookie","ACTION","useRouter","putData","Home","state","dispatch","auth","handleUpdateProfile","e","preventDefault","CPF","user","name","CEIpassword","updateInfor","type","payload","loading","token","then","res","err","error","success","msg","handleLogout","remove","path","localStorage","removeItem","AUTH","loggedRouter","email","router"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,SAA5B,QAA6C,OAA7C;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,SAASC,WAAT,QAA4B,4BAA5B;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,SAASC,MAAT,QAAuB,wBAAvB;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,SAASC,OAAT,QAAwB,oBAAxB;;AAEA,SAASC,IAAT,GAAgB;AAEZ,QAAM;AAAA,OAACC,KAAD;AAAA,OAAQC;AAAR,MAAoBV,UAAU,CAACG,WAAD,CAApC;AACA,QAAM;AAAEQ,IAAAA;AAAF,MAAWF,KAAjB;;AAEA,QAAMG,mBAAmB,GAAGC,CAAC,IAAI;AAC7BA,IAAAA,CAAC,CAACC,cAAF;AAEA,QAAGC,GAAG,KAAKJ,IAAI,CAACK,IAAL,CAAUC,IAAlB,IAA0BC,WAA7B,EAA0CC,WAAW;AACxD,GAJD;;AAMA,QAAMA,WAAW,GAAG,YAAY;AAE5BT,IAAAA,QAAQ,CAAC;AAACU,MAAAA,IAAI,EAAE,QAAP;AAAiBC,MAAAA,OAAO,EAAE;AAACC,QAAAA,OAAO,EAAE;AAAV;AAA1B,KAAD,CAAR;AAIAf,IAAAA,OAAO,CAAC,MAAD,EAAS;AACZQ,MAAAA,GADY;AACNG,MAAAA;AADM,KAAT,EAEJP,IAAI,CAACY,KAFD,CAAP,CAEeC,IAFf,CAEoBC,GAAG,IAAI;AACvB,UAAGA,GAAG,CAACC,GAAP,EAAY,OAAOhB,QAAQ,CAAC;AAACU,QAAAA,IAAI,EAAE,QAAP;AAAiBC,QAAAA,OAAO,EAAE;AAACM,UAAAA,KAAK,EAAEF,GAAG,CAACC;AAAZ;AAA1B,OAAD,CAAf;AAEZhB,MAAAA,QAAQ,CAAC;AAACU,QAAAA,IAAI,EAAE,MAAP;AAAeC,QAAAA,OAAO,EAAE;AAC7BE,UAAAA,KAAK,EAAEZ,IAAI,CAACY,KADiB;AAE7BP,UAAAA,IAAI,EAAES,GAAG,CAACT;AAFmB;AAAxB,OAAD,CAAR;AAIA,aAAON,QAAQ,CAAC;AAACU,QAAAA,IAAI,EAAE,QAAP;AAAiBC,QAAAA,OAAO,EAAE;AAACO,UAAAA,OAAO,EAAEH,GAAG,CAACI;AAAd;AAA1B,OAAD,CAAf;AACH,KAVD;AAWH,GAjBD;;AAoBA,QAAMC,YAAY,GAAG,MAAM;AACvB1B,IAAAA,MAAM,CAAC2B,MAAP,CAAc,cAAd,EAA8B;AAAEC,MAAAA,IAAI,EAAE;AAAR,KAA9B;AACAC,IAAAA,YAAY,CAACC,UAAb,CAAwB,YAAxB;AACAxB,IAAAA,QAAQ,CAAC;AACLU,MAAAA,IAAI,EAAEf,MAAM,CAAC8B,IADR;AAELd,MAAAA,OAAO,EAAE;AAFJ,KAAD,CAAR;AAIH,GAPD;;AASA,QAAMe,YAAY,GAAG,MAAM;AACvB,wBACI;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA,8BACI;AAAA,kCAAezB,IAAI,CAACK,IAAL,CAAUqB,KAAzB;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI;AAAQ,QAAA,OAAO,EAAEP,YAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ;AAMH,GAPD;;AASA,QAAMQ,MAAM,GAAGhC,SAAS,EAAxB;AAEA;AACJ;AACA;AACA;AACA;AACA;AACA;;AAGI,sBACI;AAAK,IAAA,SAAS,EAAC,oBAAf;AAAA,2BACI;AAAG,MAAA,SAAS,EAAC,cAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,UADJ;AAgBH;;AAED,eAAeE,IAAf","sourcesContent":["import React, { useContext, useEffect } from 'react';\r\nimport Link from 'next/link';\r\nimport { DataContext } from '../../../store/GlobalState';\r\nimport Cookie from 'js-cookie'\r\nimport { ACTION } from '../../../store/Actions';\r\nimport { useRouter } from 'next/router'\r\nimport { putData } from '../utils/fetchData'\r\n\r\nfunction Home() {\r\n\r\n    const [state, dispatch] = useContext(DataContext);\r\n    const { auth } = state\r\n\r\n    const handleUpdateProfile = e => {\r\n        e.preventDefault()\r\n\r\n        if(CPF !== auth.user.name || CEIpassword) updateInfor()\r\n    }\r\n    \r\n    const updateInfor = async () => {\r\n       \r\n        dispatch({type: 'NOTIFY', payload: {loading: true}})\r\n\r\n        \r\n\r\n        putData('user', {\r\n            CPF , CEIpassword\r\n        }, auth.token).then(res => {\r\n            if(res.err) return dispatch({type: 'NOTIFY', payload: {error: res.err}})\r\n\r\n            dispatch({type: 'AUTH', payload: {\r\n                token: auth.token,\r\n                user: res.user\r\n            }})\r\n            return dispatch({type: 'NOTIFY', payload: {success: res.msg}})\r\n        })\r\n    }\r\n\r\n\r\n    const handleLogout = () => {\r\n        Cookie.remove('refreshToken', { path: '/api/auth/accessToken' })\r\n        localStorage.removeItem('firstLogin')\r\n        dispatch({\r\n            type: ACTION.AUTH,\r\n            payload: {},\r\n        })\r\n    }\r\n\r\n    const loggedRouter = () => {\r\n        return (\r\n            <div className=\"mx-auto my-4\">\r\n                <p>Bem vindo, {auth.user.email}</p>\r\n                <button onClick={handleLogout}>Logout</button>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const router = useRouter()\r\n\r\n    /*useEffect(() => {\r\n        if (Object.keys(auth).length === 0) {\r\n            router.push('/bend-admin/')\r\n        } else if (Object.keys(auth).length !== 0 && !auth.user.admin) {\r\n            router.push('/bend-admin/denied-access')\r\n        }\r\n\r\n    }, [auth])*/\r\n\r\n    return (\r\n        <div className=\"d-flex flex-column\">\r\n            <p className=\"mx-auto my-4\">User HOME</p>\r\n            \r\n\r\n           {/*{\r\n                Object.keys(auth).length === 0 ?\r\n                    (\r\n                        ''\r\n                    ) : (\r\n                        loggedRouter()\r\n                    )\r\n            }*/}\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default Home"]},"metadata":{},"sourceType":"module"}